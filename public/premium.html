<!doctype html><html lang="es"><head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>IngresoU ‚Äì Panel</title>
<style>
:root{
  --bg:#f6f8fb; --card:#ffffff; --text:#0f172a; --muted:#475569; --brand:#0ea5e9; --brand-2:#0284c7;
  --line:#e2e8f0; --ok:#059669; --warn:#f59e0b; --err:#dc2626;
}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
a{color:var(--brand-2);text-decoration:none} a:hover{text-decoration:underline}
.container{max-width:1100px;margin:0 auto;padding:24px}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.nav a{margin:0 8px}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.04);margin:12px 0}
.btn{display:inline-block;background:var(--brand);color:#fff;padding:10px 14px;border-radius:12px;font-weight:700;border:0;cursor:pointer}
.btn:hover{background:var(--brand-2)}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:900px){.grid3,.grid2{grid-template-columns:1fr}}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:#eef6ff;color:#1e40af;font-size:12px;border:1px solid #dbeafe}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}
.muted{color:var(--muted)}
.input,select{width:100%;padding:10px;border:1px solid var(--line);border-radius:12px}
.label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}
.kv{display:flex;flex-wrap:wrap;gap:16px}
.kv>div{min-width:180px}
.hero{display:flex;align-items:center;justify-content:space-between}
.hero h1{margin:0 0 6px 0}
.small{font-size:13px}
</style>
</head>
<body>
<div class="container">
  <header class="header">
    <div><strong>IngresoU</strong></div>
    <nav class="nav small">
      <a href="/index.html">Inicio</a>
      <a href="/exam.html">Examen</a>
      <a href="/leaderboard.html">Ranking</a>
      <a href="/admin.html">Admin</a>
    </nav>
  </header>

  <!-- HERO / BIENVENIDA -->
  <div class="card hero">
    <div>
      <h1 id="hola">Hola üëã</h1>
      <div class="muted" id="resumen">Bienvenido(a) a tu panel.</div>
      <div style="margin-top:10px">
        <button id="btnExamenRapido" class="btn">Examen r√°pido (30 min)</button>
        <button id="btnSalir" class="btn" style="background:#e11d48;margin-left:6px">Salir</button>
      </div>
    </div>
    <div>
      <div class="badge" id="badgePlan">Plan</div>
    </div>
  </div>

  <div class="grid2">
    <!-- EXAMEN R√ÅPIDO -->
    <div class="card">
      <h2 style="margin:0 0 10px 0">Generar examen</h2>
      <div class="grid2">
        <div>
          <label class="label">Dificultad</label>
          <select id="difficulty">
            <option value="mixed">Mixta</option>
            <option value="basic">B√°sica</option>
            <option value="medium">Media</option>
            <option value="hard">Dif√≠cil</option>
          </select>
        </div>
        <div>
          <label class="label">Preguntas por secci√≥n</label>
          <input id="count" type="number" class="input" min="5" max="30" value="10"/>
        </div>
        <div>
          <label class="label">Tiempo (min)</label>
          <select id="time">
            <option value="30">30</option>
            <option value="20">20</option>
            <option value="15">15</option>
            <option value="10">10</option>
          </select>
        </div>
      </div>
      <div style="margin-top:10px">
        <button id="btnGenerar" class="btn">Iniciar ahora</button>
        <span class="muted small">Secciones: √Ålgebra, L√≥gico, Lectura.</span>
      </div>
    </div>

    <!-- SUSCRIPCI√ìN -->
    <div class="card">
      <h2 style="margin:0 0 10px 0">Tu suscripci√≥n</h2>
      <div class="kv small">
        <div><div class="muted">Correo</div><div id="infoEmail" class="mono"></div></div>
        <div><div class="muted">KEY</div><div id="infoCode" class="mono"></div></div>
        <div><div class="muted">Universidad</div><div id="infoUni"></div></div>
        <div><div class="muted">Plan</div><div id="infoPlan"></div></div>
        <div><div class="muted">Vence</div><div id="infoVence"></div></div>
      </div>
    </div>
  </div>

  <!-- M√ìDULOS -->
  <div class="card">
    <h2 style="margin:0 0 8px 0">Pr√°cticas por m√≥dulo</h2>
    <div class="grid3">
      <div class="card">
        <h3>√Ålgebra</h3>
        <p class="muted small">Ecuaciones, funciones, proporciones‚Ä¶</p>
        <a class="btn" href="/practice-algebra.html">Practicar</a>
      </div>
      <div class="card">
        <h3>Razonamiento L√≥gico</h3>
        <p class="muted small">Secuencias, analog√≠as, silogismos‚Ä¶</p>
        <a class="btn" href="/practice-logico.html">Practicar</a>
      </div>
      <div class="card">
        <h3>Comprensi√≥n Lectora</h3>
        <p class="muted small">Idea principal, inferencias, vocabulario‚Ä¶</p>
        <a class="btn" href="/practice-lectura.html">Practicar</a>
      </div>
    </div>
  </div>

  <!-- EXTRA -->
  <div class="card small muted">
    ¬øProblemas? Revisa tu conexi√≥n o vuelve a intentarlo. Puedes ver el
    <a href="/leaderboard.html">ranking</a> o gestionar claves en el <a href="/admin.html">admin</a>.
  </div>
</div>

<script>
(function(){
  // --- sesi√≥n obligatoria ---
  const email = (localStorage.getItem('ingresou_email')||'').toLowerCase();
  const code  = (localStorage.getItem('ingresou_key')||'').toUpperCase();
  const uni   = localStorage.getItem('ingresou_university')||'';
  const plan  = localStorage.getItem('ingresou_plan')||'';
  const exp   = localStorage.getItem('ingresou_expires_at')||'';

  if(!email || !code){
    // sin sesi√≥n ‚Üí a login
    location.href = '/index.html';
    return;
  }

  // UI
  document.getElementById('hola').textContent = `Hola, ${email.split('@')[0]} üëã`;
  document.getElementById('resumen').textContent = 'Desde aqu√≠ puedes iniciar un examen o practicar por m√≥dulo.';
  document.getElementById('badgePlan').textContent = `${plan||'plan'} ‚Ä¢ ${uni||'‚Äî'}`;

  document.getElementById('infoEmail').textContent = email;
  document.getElementById('infoCode').textContent  = code;
  document.getElementById('infoUni').textContent   = uni||'‚Äî';
  document.getElementById('infoPlan').textContent  = plan||'‚Äî';
  document.getElementById('infoVence').textContent = exp? new Date(exp).toLocaleString() : '‚Äî';

  // Examen r√°pido bot√≥n grande
  document.getElementById('btnExamenRapido').onclick = ()=>{
    const variant = Date.now()%1e6;
    location.href = `/exam.html?autostart=1&count=10&difficulty=mixed&time=${30*60}&variant=${variant}`;
  };

  // Examen con par√°metros del formulario
  document.getElementById('btnGenerar').onclick = ()=>{
    const count = Math.max(5, Math.min(30, parseInt(document.getElementById('count').value||10,10)));
    const difficulty = document.getElementById('difficulty').value;
    const mins = parseInt(document.getElementById('time').value,10)||30;
    const variant = Date.now()%1e6;
    location.href = `/exam.html?autostart=1&count=${count}&difficulty=${encodeURIComponent(difficulty)}&time=${mins*60}&variant=${variant}`;
  };

  // salir
  document.getElementById('btnSalir').onclick = ()=>{
    localStorage.removeItem('ingresou_email');
    localStorage.removeItem('ingresou_key');
    localStorage.removeItem('ingresou_plan');
    localStorage.removeItem('ingresou_university');
    localStorage.removeItem('ingresou_expires_at');
    location.href = '/index.html';
  };
})();
</script>
</body></html>
